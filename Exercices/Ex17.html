<!DOCTYPE html>

<html lang="fr">
<head>
<title>Un petit dessin</title></title>
<meta charset="UTF-8">
<style>
	#grandcadre	{
					position: absolute;
					top: 0px;
					left: 0px;
					border: dotted 2px black; 
					width: 600px;
					height: 450px;
				}
				
	#petitcadre	{
						position: absolute;
						top: 450px;
						left: 600px;
						border: solid 2px black;
						width: 200px;
						height: 150px;
					}
				
	.point	{
					position: absolute;
					width: 3px;
					height: 3px;
				}
				
</style>
<script>

	function Init()
		{

			gdCadre=document.getElementById("grandcadre");
			ptCadre=document.getElementById("petitcadre");
			zoneinfo=document.getElementById("info");
			
			dessin=false;
			couleur="blue";
			zoneinfo.style.color=couleur;
			zoneinfo.appendChild(document.createTextNode(couleur));
			
			if (ptCadre.addEventListener) ptCadre.addEventListener("mousemove", dessine, false);
			if (ptCadre.addEventListener) ptCadre.addEventListener("click", crayon, false);
			
		}
		
	function crayon(evenement)
		{
			if (evenement.ctrlKey)
				{
					if (couleur=="blue")
						{
							couleur="red";
						}
					else
						{
							couleur="blue";
						}			
					zoneinfo.style.color=couleur;
					zoneinfo.removeChild(zoneinfo.childNodes[0]);
					zoneinfo.appendChild(document.createTextNode(couleur));
				}
			dessin=!dessin;
		}
		
	function dessine(evenement)
		{
			if (dessin)
				{
					var newdiv=document.createElement("div");
					gdCadre.appendChild(newdiv);
					newdiv.style.left=(evenement.clientX-600)*3+"px";
					newdiv.style.top=(evenement.clientY-450)*3+"px";
					newdiv.setAttribute("class", "point");
					newdiv.style.backgroundColor=couleur;
				}
		}
</script>

</head>
<body onload="Init()">
    <p>Exercice 2. Manipulation des gestionnaires d'événements (suite)</p>

<div id="grandcadre"><p id="info"></p></div>
<div id="petitcadre"></div>

</body>
</html>
